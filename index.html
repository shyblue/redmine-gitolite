<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Redmine Gitolite by jbox-web</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Redmine Gitolite</h1>
        <h2></h2>
        <a href="https://github.com/jbox-web/redmine-gitolite" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>redmine-gitolite</h1>

<p>CURRENT HEAD VERSION WORKS WITH TRUNK REDMINE (certified with 2.2.3)</p>

<p>THIS PLUGIN IS COMPATIBLE WITH REDMINE 2.X ONLY !</p>

<p>It combines <code>redmine-gitolite</code>__ with <code>redmine_git_hosting</code>__</p>

<p>A Redmine plugin which manages your Gitolite configuration based on your projects and user memberships in Redmine.</p>

<p>__ <a href="https://github.com/ivyl/redmine-gitolite">https://github.com/ivyl/redmine-gitolite</a>
__ <a href="https://github.com/ericpaulbishop/redmine_git_hosting">https://github.com/ericpaulbishop/redmine_git_hosting</a></p>

<h2>Gems</h2>

<ul>
<li>net-ssh</li>
<li>lockfile</li>
<li>
<code>gitolite</code>__ (works with 1.1.0)</li>
</ul><p>__ <a href="https://github.com/wingrunr21/gitolite">https://github.com/wingrunr21/gitolite</a></p>

<h2>Other</h2>

<ul>
<li>Gitolite server (works with v2.3.1 and v3.3)</li>
<li>accessible Git executable (works with 1.7.2.5)</li>
<li>curl</li>
</ul><h2>Setup</h2>

<ol>
<li>Install Redmine and put this plugin in redmine/plugins directory and migrate database (plugins)</li>
</ol><p>.. code:: ruby</p>

<pre><code>$ cd redmine/plugins
$ git clone git://github.com/pitit-atchoum/redmine-gitolite.git redmine_gitolite
$ cd ..
$ RAILS_ENV=production rake db:migrate_plugins
</code></pre>

<ol>
<li>Create SSH Keys for user running Redmine</li>
</ol><p>.. code:: ruby</p>

<pre><code>$ sudo su - redmine
$ ssh-keygen -N '' -f ~/.ssh/redmine_gitolite_admin_id_rsa
</code></pre>

<ol>
<li><p>User running Redmine must have RW+ access to gitolite-admin (assuming that you have Gitolite installed).</p></li>
<li><p>Make sure that Redmine user has Gitolite server in his known_hosts list (This is also a good check to see if Gitolite works)</p></li>
</ol><p>.. code:: ruby</p>

<p>$ sudo su - redmine
  $ ssh git@localhost</p>

<ul>
<li>[accept key]</li>
</ul><p>You should get something like that :</p>

<p>.. code:: ruby</p>

<pre><code>hello redmine_redmine, this is gitolite v2.3.1-0-g912a8bd-dt running on git 1.7.2.5
the gitolite config gives you the following access:
    R   W  gitolite-admin
    @R_ @W_ testing
</code></pre>

<p>Or</p>

<p>.. code:: ruby</p>

<pre><code>hello redmine_gitolite_admin_id_rsa, this is git@dev running gitolite3 v3.3-11-ga1aba93 on git 1.7.2.5
    R W  gitolite-admin
    R W  testing
</code></pre>

<ol>
<li>Configure email and name of git user for your redmine account</li>
</ol><p>.. code:: ruby</p>

<pre><code>$ sudo su - redmine
$ git config --global user.email "redmine@gitolite.org"
$ git config --global user.name "Redmine Gitolite"
</code></pre>

<ol>
<li>Add post-receive hook to common Gitolite hooks (script is in contrib dir) and configure it (Redmine Host and API key)</li>
</ol><p>.. code:: ruby</p>

<pre><code>$ sudo su - gitolite #login on gitolite user
$ cat &gt; .gitolite/hooks/common/post-receive
* [paste hook]
$ vim .gitolite/hooks/common/post-receive
* [enable WS for repository management in administration-&gt;settings-&gt;repositories]
* [copy generated API key] (DEFAULT_REDMINE_KEY)
* [set Redmine server URL] (DEFAULT_REDMINE_SERVER)
$ chmod +x .gitolite/hooks/common/post-receive
$ vim .gitolite.rc
* [add ".*" to the GL_GIT_CONFIG_KEYS setting
* [ set $REPO_UMASK = 0022; ]
$ gl-setup
</code></pre>

<ol>
<li>Configure plugin in Redmine settings</li>
</ol><p>.. code:: ruby</p>

<pre><code>* [Adminitration -&gt; Plugins -&gt; Redmine Gitolite]
* [Gitolite URL should be set to your gitolite-admin git repository]
* [Base path should point to the Gitolite directory which will hold local copies (must exist, example : /home/gitolite/repositories)
* [Set developer and ro urls as in given examples (just slightly modify them)]
  [%{name} will be replaced with your repository identifier]
</code></pre>

<h2>Found a bug?</h2>

<p>Open new issue and complain. You can also fix it and sent pull request.
This plugin is in active usage in current, edge Redmine. Any suggestions are welcome.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/jbox-web/redmine-gitolite/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/jbox-web/redmine-gitolite/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/jbox-web/redmine-gitolite"></a> is maintained by <a href="https://github.com/jbox-web">jbox-web</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36504891-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>